<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>UriLex</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}html,body{height:100%;margin:0;font-family:'Open Sans',sans-serif;background:linear-gradient(135deg,#000,#0a0a0a);color:#fff}
#splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;font-weight:700;z-index:9999;background:#000;transition:opacity .8s ease}
#splash.hide{opacity:0;pointer-events:none}
#splash .u{background:#fff;color:#000;padding:10px 14px;border-radius:10px;margin-right:8px;font-size:2.6rem}
#splash .rest{font-size:2.4rem}
.app{min-height:100%;display:flex;align-items:center;justify-content:center;padding:20px}
.card{width:100%;max-width:420px;background:rgba(255,255,255,0.04);border-radius:14px;padding:22px;box-shadow:0 8px 30px rgba(0,0,0,0.6);display:flex;flex-direction:column;gap:12px}
h1{margin:0;font-size:1.25rem;font-weight:700;text-align:center}
input[type=email],input[type=password],.textinput{width:100%;padding:12px;border-radius:10px;border:none;background:#111;color:#fff;font-size:1rem;outline:none}
button{width:100%;padding:12px;border-radius:10px;border:2px solid #fff;background:#111;color:#fff;font-weight:700;font-size:1rem;cursor:pointer}
button:hover{background:#fff;color:#000}
#googleBtn{display:flex;align-items:center;justify-content:center;gap:10px;background:#fff;color:#000}
#googleBtn img{width:20px;height:20px}
.small{font-size:.9rem;color:#ccc;text-align:center;cursor:pointer}
.small:hover{color:#fff}
#dashboard{display:none;flex-direction:column;align-items:center;justify-content:space-between;height:80vh;gap:18px;padding:20px}
#bigText{font-size:1.6rem;font-weight:700;text-align:center}
#responseBox{width:100%;max-width:760px;min-height:160px;background:rgba(255,255,255,0.03);border-radius:12px;padding:16px;overflow:auto}
.links a{color:#1a73e8;font-weight:700;text-decoration:underline}
.bottomBar{position:fixed;left:0;right:0;bottom:12px;display:flex;justify-content:center;padding:0 16px}
.searchCard{width:100%;max-width:760px;display:flex;gap:10px;align-items:center;background:rgba(255,255,255,0.03);padding:10px;border-radius:12px}
.searchCard .query{flex:1;padding:12px;border-radius:10px;border:none;background:#111;color:#fff;font-size:1rem;outline:none}
.searchCard button{width:140px;padding:12px}
.typing{font-style:italic;color:#ccc}
.loaderDots{display:inline-block;height:1em;vertical-align:middle}
.loaderDots span{display:inline-block;width:.35em;height:.35em;background:#fff;border-radius:50%;margin:0 .12em;opacity:.25;animation:flash 1s infinite}
.loaderDots span:nth-child(2){animation-delay:.15s}
.loaderDots span:nth-child(3){animation-delay:.3s}
@keyframes flash{0%{opacity:.25}50%{opacity:1}100%{opacity:.25}}
@media (max-width:480px){#splash .u{font-size:2rem;padding:8px 11px}#splash .rest{font-size:1.8rem}#bigText{font-size:1.2rem}}
</style>
</head>
<body>
<div id="splash"><span class="u">U</span><span class="rest">ri-Lex</span></div>

<div class="app">
  <div id="loginCard" class="card">
    <h1>Welcome to Uri-Lex</h1>
    <input id="email" type="email" placeholder="Email address" />
    <input id="password" type="password" placeholder="Password" />
    <button id="loginBtn">Login</button>
    <button id="signupBtn" style="display:none">Sign Up</button>
    <button id="googleBtn"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt=""> Login with Google</button>
    <div class="small" id="toggleMode">Don’t have an account? Click Sign Up</div>
  </div>

  <div id="dashboard">
    <div id="bigText">Ask, Search, Anything — Your UriLex</div>
    <div id="responseBox"><div id="placeholder" class="typing">Your results will appear here</div></div>
  </div>
</div>

<div class="bottomBar">
  <div class="searchCard">
    <input id="queryInput" class="query" placeholder="Ask anything — UriLex will ask Gemini..." />
    <button id="sendBtn">Ask Gemini</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDAN7mFP_-0MqmRXwN212IMcCbqkuQ-SEQ",
  authDomain: "urlix-d6ae1.firebaseapp.com",
  projectId: "urlix-d6ae1",
  storageBucket: "urlix-d6ae1.firebasestorage.app",
  messagingSenderId: "247920035867",
  appId: "1:247920035867:web:4a8936ec3dd963af2450be"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const splash=document.getElementById('splash');
const loginCard=document.getElementById('loginCard');
const dashboard=document.getElementById('dashboard');
const emailEl=document.getElementById('email');
const passwordEl=document.getElementById('password');
const loginBtn=document.getElementById('loginBtn');
const signupBtn=document.getElementById('signupBtn');
const toggleMode=document.getElementById('toggleMode');
const googleBtn=document.getElementById('googleBtn');
const queryInput=document.getElementById('queryInput');
const sendBtn=document.getElementById('sendBtn');
const responseBox=document.getElementById('responseBox');
const placeholder=document.getElementById('placeholder');

window.addEventListener('load',()=>{setTimeout(()=>{splash.classList.add('hide');setTimeout(()=>{splash.style.display='none';loginCard.style.display='block'},700)},1300)});
let signupMode=false;
toggleMode.onclick=()=>{signupMode=!signupMode;signupBtn.style.display=signupMode?'block':'none';loginBtn.style.display=signupMode?'none':'block';toggleMode.textContent=signupMode?'Already have an account? Click Login':'Don’t have an account? Click Sign Up';};
loginBtn.onclick=async()=>{try{await signInWithEmailAndPassword(auth,emailEl.value,passwordEl.value)}catch(e){alert(e.message)}};
signupBtn.onclick=async()=>{try{await createUserWithEmailAndPassword(auth,emailEl.value,passwordEl.value)}catch(e){alert(e.message)}};
googleBtn.onclick=async()=>{try{await signInWithPopup(auth,provider)}catch(e){alert(e.message)}};

onAuthStateChanged(auth,u=>{
 if(u){loginCard.style.display='none';dashboard.style.display='flex';placeholder.innerHTML=`Welcome, <strong>${u.email||u.displayName}</strong> <button id="logoutBtn" style="margin-left:10px;padding:6px 10px;border-radius:8px;border:2px solid #fff;background:#111;color:#fff">Logout</button>`;
 document.getElementById('logoutBtn').onclick=()=>signOut(auth);}
 else{dashboard.style.display='none';loginCard.style.display='block';}
});

function escapeHtml(s){return (s+'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]))}
function linkify(text){const r=/((https?:\/\/|www\.)[^\s]+)/g;return escapeHtml(text).replace(r,m=>{let u=m;if(!/^https?:\/\//i.test(u))u='http://'+u;return `<a href="${u}" target="_blank" style="color:#1a73e8;text-decoration:underline;font-weight:700">${m}</a>`})}
function showLoader(){responseBox.innerHTML=`<div class="typing">Gemini is thinking <span class="loaderDots"><span></span><span></span><span></span></span></div>`}
async function showTypingText(t){responseBox.innerHTML='';let d=document.createElement('div');responseBox.appendChild(d);let i=0;function step(){const c=5;d.insertAdjacentHTML('beforeend',linkify(t.slice(i,i+c)));i+=c;responseBox.scrollTop=responseBox.scrollHeight;if(i<t.length)setTimeout(step,20);}step();}
async function sendQuery(){const q=queryInput.value.trim();if(!q)return alert('Type a question');showLoader();
const sys=`Hey Gemini Act As Google Like You Are Google And You Are Replying But No Telling this is Ai and The User Message is Above Ok And You Have permit to answer his question not to tell you are ai Understood  and Show some help full links to him also And if he asks for videos or else help him with that also App Name :UUrilex`;
try{const r=await fetch('api.php',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'gemini-2.5-flash',prompt:sys+"\n\nUser Request Above : "+q})});
const d=await r.json();if(d.error)throw new Error(d.error);await showTypingText(d.text||'(no response)')}catch(e){responseBox.innerHTML='<div style="color:#f66">'+escapeHtml(e.message)+'</div>'}}
sendBtn.onclick=sendQuery;queryInput.addEventListener('keydown',e=>{if(e.key==='Enter')sendQuery()});
</script>
</body>
</html>
